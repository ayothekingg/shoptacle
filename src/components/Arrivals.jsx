import React from "react";

import { commerce } from "../lib/commerce";
import Products from "./Products/Products";
import { useState } from "react";
import { useEffect } from "react";
import Cart from "./Carts/Cart";
import { useContext } from "react";
import { UserContext } from "../contexts/context";
import { Link, Routes, Route } from "react-router-dom";

const Arrivals = ({ onAddToCart, removeCart, cart }) => {
  const [products, setProducts] = useState([]);

  const fetchProducts = async () => {
    const { data } = await commerce.products.list();

    setProducts(data);
  };

  const { currentUser } = useContext(UserContext);

  useEffect(() => {
    fetchProducts();
  }, []);

  return (
    <section className="">
      <span className="[&>*]:inline [&>*]:mx-2 font-oswald  ">
        <h1>Find a Store</h1>
        <h1>Create Account</h1>
        <h1>Help & FAQs</h1>
      </span>
      <div className="font=oswald flex mt-4 mb-2  max-w-[1240px] lg:ml-20 justify-between md:justify-start">
        <Link to="*">
          <div className="flex flex-[0_0_18%]">
            <svg
              className="mt-2"
              width="159"
              height="32"
              viewBox="0 0 159 32"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12.232 24.384C10.8667 24.384 9.50133 24.0533 8.136 23.392C6.77067 22.7307 5.416 22.048 4.072 21.344C3.64533 21.344 3.09067 21.6747 2.408 22.336C1.74667 22.976 1.23467 23.6587 0.872 24.384H0.328L5.064 12.736H5.64C5.61867 13.0347 5.59733 13.4827 5.576 14.08C5.55467 14.656 5.544 15.072 5.544 15.328C5.544 16.352 5.61867 17.2373 5.768 17.984C5.91733 18.7307 6.20533 19.5947 6.632 20.576C7.08 21.536 7.82667 22.3147 8.872 22.912C9.93867 23.488 11.1653 23.776 12.552 23.776C13.832 23.776 14.8667 23.4027 15.656 22.656C16.4453 21.9093 16.84 21.056 16.84 20.096C16.84 19.456 16.6267 18.8587 16.2 18.304C15.7733 17.7493 14.9093 17.12 13.608 16.416C12.328 15.6907 10.792 14.8267 9 13.824C6.90933 12.352 5.864 10.528 5.864 8.352C5.864 6.19733 6.856 4.32 8.84 2.72C10.824 1.12 13.2027 0.32 15.976 0.32C17.4267 0.32 18.728 0.533333 19.88 0.959999C20.9253 1.42933 21.9813 1.89867 23.048 2.368C23.56 2.368 23.9867 2.19733 24.328 1.856C24.6693 1.51467 25.0427 1.00267 25.448 0.32H26.056L22.12 10.048H21.544C21.5867 9.77067 21.6187 9.44 21.64 9.056C21.6613 8.672 21.672 8.21333 21.672 7.68C21.672 6.82667 21.6293 6.10133 21.544 5.504C21.48 4.88533 21.2987 4.224 21 3.52C20.7013 2.79467 20.168 2.18667 19.4 1.696C18.632 1.184 17.544 0.927999 16.136 0.927999C15.048 0.927999 14.0347 1.23733 13.096 1.856C12.1787 2.45333 11.72 3.264 11.72 4.288C11.72 4.94933 11.9227 5.568 12.328 6.144C12.7547 6.72 13.2453 7.168 13.8 7.488C14.3547 7.808 15.304 8.34133 16.648 9.088C17.992 9.81333 19.08 10.4427 19.912 10.976C20.744 11.488 21.4587 12.224 22.056 13.184C22.6747 14.144 22.984 15.2 22.984 16.352C22.984 18.6773 21.9707 20.5973 19.944 22.112C17.9173 23.6267 15.3467 24.384 12.232 24.384ZM43.3028 19.2C42.3214 20.8853 41.4148 22.1653 40.5828 23.04C39.7508 23.8933 38.5348 24.32 36.9348 24.32C35.8041 24.32 34.9401 23.9787 34.3428 23.296C33.7668 22.6133 33.4788 21.7387 33.4788 20.672C33.4788 19.84 33.6494 19.008 33.9908 18.176C34.3108 17.536 34.7268 16.7253 35.2388 15.744C35.7508 14.7413 36.3054 13.6747 36.9028 12.544C37.5001 11.4133 37.7988 10.56 37.7988 9.984C37.7988 9.74933 37.7454 9.57867 37.6388 9.472C37.5534 9.36533 37.4148 9.312 37.2228 9.312C36.8388 9.312 36.4654 9.42933 36.1028 9.664C35.7401 9.89867 35.2388 10.4 34.5988 11.168C33.9588 11.9147 33.3508 12.9813 32.7748 14.368L28.8388 24H22.6307C23.2067 22.592 23.9321 20.8213 24.8068 18.688C25.6814 16.5547 26.6841 14.08 27.8148 11.264C28.9668 8.42667 29.7774 6.4 30.2468 5.184C30.7374 3.968 31.0361 3.18933 31.1428 2.848C31.2708 2.50667 31.3348 2.21867 31.3348 1.984C31.3348 1.49333 30.9828 1.248 30.2788 1.248L28.8708 1.184V0.671999H38.3108L33.8628 11.36C34.6948 10.4 35.3881 9.68533 35.9428 9.216C36.5188 8.74667 37.4148 8.512 38.6308 8.512C39.6761 8.512 40.6041 8.832 41.4148 9.472C42.2468 10.112 42.6628 11.072 42.6628 12.352C42.6628 13.0773 42.5774 13.6533 42.4068 14.08C42.2574 14.5067 41.9054 15.3067 41.3507 16.48C40.7961 17.6533 40.1454 18.9333 39.3988 20.32C38.6734 21.7067 38.3108 22.56 38.3108 22.88C38.3108 23.0293 38.3534 23.1467 38.4388 23.232C38.5454 23.3173 38.6841 23.36 38.8548 23.36C39.4308 23.36 40.0281 22.9867 40.6468 22.24C41.2868 21.472 41.7668 20.8427 42.0868 20.352C42.4068 19.8613 42.6734 19.4133 42.8868 19.008L43.3028 19.2ZM61.1208 14.848C61.1208 17.2587 60.0861 19.4453 58.0168 21.408C55.9688 23.3493 53.4621 24.32 50.4968 24.32C49.6008 24.32 48.7901 24.1493 48.0648 23.808C47.3394 23.4667 46.5608 22.8587 45.7288 21.984C44.9181 21.1093 44.5128 19.776 44.5128 17.984C44.5128 15.616 45.5261 13.4507 47.5528 11.488C49.6008 9.504 52.1288 8.512 55.1368 8.512C56.0754 8.512 56.8861 8.68267 57.5688 9.024C58.2514 9.344 58.9021 9.83467 59.5208 10.496C60.1394 11.1573 60.5554 11.8613 60.7688 12.608C61.0034 13.3333 61.1208 14.08 61.1208 14.848ZM56.7048 10.144C56.7048 9.80267 56.6194 9.536 56.4488 9.344C56.2994 9.152 56.0434 9.056 55.6808 9.056C55.2968 9.056 54.8808 9.32267 54.4328 9.856C53.9848 10.368 53.3341 11.4667 52.4808 13.152C51.6488 14.816 50.8488 16.6187 50.0808 18.56C49.3128 20.48 48.9288 21.8347 48.9288 22.624C48.9288 23.0293 49.0141 23.3387 49.1848 23.552C49.3554 23.744 49.6114 23.84 49.9528 23.84C50.3154 23.84 50.6994 23.6053 51.1048 23.136C51.5101 22.6667 52.0968 21.6853 52.8648 20.192C53.6541 18.6987 54.4861 16.8747 55.3608 14.72C56.2568 12.544 56.7048 11.0187 56.7048 10.144ZM81.4643 13.856C81.4643 16.2027 80.5256 18.5387 78.6483 20.864C76.7923 23.168 74.5416 24.32 71.8963 24.32C70.9363 24.32 70.1576 24.128 69.5603 23.744C68.9629 23.36 68.6643 22.6133 68.6643 21.504C68.1523 22.6773 67.6189 23.9147 67.0643 25.216C66.5309 26.5387 66.1789 27.424 66.0083 27.872C65.8376 28.32 65.6669 28.768 65.4963 29.216C65.3469 29.664 65.2723 29.9733 65.2723 30.144C65.2723 30.4853 65.4323 30.688 65.7523 30.752C66.0936 30.8373 66.8509 30.88 68.0243 30.88V31.392H55.7682V30.88C55.8962 30.88 56.0669 30.8693 56.2802 30.848C56.4936 30.8267 56.8349 30.784 57.3042 30.72C57.7522 30.656 58.1576 30.464 58.5202 30.144C58.8829 29.8453 59.4056 28.9067 60.0882 27.328L66.6163 11.84C66.7656 11.4987 66.8829 11.1893 66.9683 10.912C67.0536 10.6133 67.0963 10.3573 67.0963 10.144C67.0963 9.952 67.0643 9.81333 67.0003 9.728C66.9363 9.62133 66.8296 9.568 66.6803 9.568C66.4029 9.568 66.0936 9.696 65.7523 9.952C65.4323 10.208 65.0696 10.5813 64.6643 11.072C64.2589 11.5413 63.8216 12.128 63.3523 12.832C62.9043 13.5147 62.5309 14.1653 62.2323 14.784L61.8163 14.592C62.6269 12.9067 63.5549 11.4773 64.6003 10.304C65.6456 9.10933 66.8616 8.512 68.2483 8.512C69.3576 8.512 70.2109 8.85333 70.8083 9.536C71.4269 10.1973 71.7363 11.1467 71.7363 12.384L71.6723 13.184C72.5043 11.6267 73.2509 10.464 73.9123 9.696C74.5949 8.90667 75.5763 8.512 76.8563 8.512C78.0936 8.512 79.1709 8.992 80.0883 9.952C81.0056 10.8907 81.4643 12.192 81.4643 13.856ZM76.2483 10.432C76.2483 10.048 76.1843 9.77067 76.0563 9.6C75.9496 9.408 75.7789 9.312 75.5443 9.312C75.0536 9.312 74.5096 9.67467 73.9123 10.4C73.3149 11.1253 72.7389 12.0853 72.1843 13.28C71.6296 14.4533 70.9789 16.0107 70.2323 17.952C69.5069 19.872 69.1443 21.216 69.1443 21.984C69.1443 22.4107 69.2189 22.7413 69.3683 22.976C69.5389 23.1893 69.7843 23.296 70.1042 23.296C70.6163 23.296 71.0643 22.976 71.4483 22.336C71.8536 21.6747 72.3763 20.7253 73.0163 19.488C73.6563 18.2507 74.3496 16.6293 75.0963 14.624C75.8643 12.6187 76.2483 11.2213 76.2483 10.432ZM96.4998 8.832L96.0838 9.856H92.4998L87.6678 21.536C87.5184 21.8987 87.4224 22.1653 87.3798 22.336C87.3371 22.5067 87.3158 22.6773 87.3158 22.848C87.3158 23.04 87.3584 23.1893 87.4438 23.296C87.5291 23.3813 87.6464 23.424 87.7958 23.424C88.0731 23.424 88.3931 23.3067 88.7558 23.072C89.1398 22.816 89.5344 22.4853 89.9398 22.08C90.3451 21.6533 90.7611 21.1307 91.1878 20.512C91.6358 19.8933 91.9984 19.3173 92.2758 18.784L92.6918 19.008C91.6464 20.7573 90.6331 22.08 89.6518 22.976C88.6918 23.872 87.4971 24.32 86.0677 24.32C84.8304 24.32 83.9024 23.9573 83.2838 23.232C82.6651 22.4853 82.3558 21.6 82.3558 20.576C82.3558 20.1067 82.4091 19.7013 82.5158 19.36C82.6224 18.9973 82.8038 18.4853 83.0598 17.824L86.3878 9.856H83.6358L84.0518 8.832H86.8038L89.3638 2.656H95.5398L92.9478 8.832H96.4998ZM114.878 8.832L109.342 20.992C109.278 21.12 109.172 21.3973 109.022 21.824C108.873 22.2507 108.798 22.5173 108.798 22.624C108.798 22.7947 108.83 22.9333 108.894 23.04C108.98 23.1253 109.097 23.168 109.246 23.168C109.545 23.168 109.961 22.9547 110.494 22.528C111.028 22.1013 111.593 21.504 112.19 20.736C112.809 19.9467 113.364 19.072 113.854 18.112L114.27 18.304C113.673 19.4133 113.054 20.4053 112.414 21.28C111.796 22.1333 111.017 22.8587 110.078 23.456C109.14 24.032 108.009 24.32 106.686 24.32C105.62 24.32 104.82 24.032 104.286 23.456C103.753 22.8587 103.486 21.9733 103.486 20.8C102.654 22.0373 101.854 22.9333 101.086 23.488C100.34 24.0427 99.3689 24.32 98.1743 24.32C96.8943 24.32 95.8383 23.9147 95.0063 23.104C94.1956 22.272 93.7903 21.1947 93.7903 19.872C93.7903 17.3547 94.9423 14.8373 97.2463 12.32C99.5716 9.78133 102.142 8.512 104.958 8.512C105.62 8.512 106.217 8.672 106.75 8.992C107.284 9.312 107.55 9.81333 107.55 10.496L107.454 11.264L108.574 8.832H114.878ZM107.134 10.56C107.134 10.2187 107.06 9.97333 106.91 9.824C106.782 9.65333 106.569 9.568 106.27 9.568C105.865 9.568 105.396 9.888 104.862 10.528C104.35 11.168 103.678 12.288 102.846 13.888C102.014 15.488 101.182 17.2587 100.35 19.2C99.5183 21.1413 99.1023 22.4 99.1023 22.976C99.1023 23.168 99.1449 23.3173 99.2303 23.424C99.3156 23.5307 99.4436 23.584 99.6143 23.584C100.276 23.584 100.905 23.264 101.502 22.624C102.1 21.9627 102.558 21.408 102.878 20.96C103.198 20.4907 103.614 19.712 104.126 18.624C104.66 17.5147 105.289 16.096 106.014 14.368C106.761 12.64 107.134 11.3707 107.134 10.56ZM126.69 9.056C126.22 9.056 125.698 9.344 125.122 9.92C124.546 10.496 123.948 11.3493 123.33 12.48C122.711 13.6107 122.21 14.88 121.826 16.288C121.442 17.6747 121.25 18.912 121.25 20C121.25 21.2373 121.431 22.1013 121.794 22.592C122.178 23.0613 122.711 23.296 123.394 23.296C123.927 23.296 124.407 23.2107 124.834 23.04C125.26 22.848 125.73 22.56 126.242 22.176C126.775 21.792 127.212 21.3973 127.554 20.992C127.916 20.5867 128.29 20.1067 128.674 19.552L129.122 19.872C127.906 21.5573 126.69 22.72 125.474 23.36C124.279 24 122.999 24.32 121.634 24.32C120.034 24.32 118.53 23.84 117.122 22.88C115.735 21.8987 115.042 20.48 115.042 18.624C115.042 16.0853 116.162 13.7707 118.402 11.68C120.663 9.568 123.362 8.512 126.498 8.512C128.354 8.512 129.644 8.85333 130.37 9.536C131.116 10.2187 131.49 10.976 131.49 11.808C131.49 12.7253 131.212 13.472 130.658 14.048C130.124 14.6027 129.431 14.88 128.578 14.88C127.81 14.88 127.17 14.656 126.658 14.208C126.146 13.76 125.89 13.2053 125.89 12.544C125.89 11.9893 126.135 11.392 126.626 10.752C127.138 10.112 127.394 9.67467 127.394 9.44C127.394 9.312 127.33 9.216 127.202 9.152C127.095 9.088 126.924 9.056 126.69 9.056ZM136.841 4.192C137.097 3.552 137.268 3.08267 137.353 2.784C137.46 2.48533 137.513 2.21867 137.513 1.984C137.513 1.64267 137.332 1.42933 136.969 1.344C136.628 1.23733 135.988 1.184 135.049 1.184V0.671999H144.489C143.764 2.44267 142.879 4.61867 141.833 7.2C140.788 9.76 139.529 12.8533 138.057 16.48C136.585 20.0853 135.807 21.9947 135.721 22.208C135.657 22.4213 135.625 22.6453 135.625 22.88C135.625 23.072 135.668 23.2107 135.753 23.296C135.839 23.3813 135.945 23.424 136.073 23.424C136.649 23.424 137.225 23.072 137.801 22.368C138.399 21.664 138.9 21.0027 139.305 20.384C139.732 19.7653 140.116 19.1787 140.457 18.624L140.905 18.848C139.753 20.7467 138.751 22.1333 137.897 23.008C137.065 23.8827 135.988 24.32 134.665 24.32C133.513 24.32 132.564 23.936 131.817 23.168C131.071 22.4 130.697 21.5253 130.697 20.544C130.697 20.0533 130.751 19.6053 130.857 19.2C130.964 18.7947 131.124 18.336 131.337 17.824L136.841 4.192ZM148.542 16.544C150.035 16.3733 151.39 15.5413 152.606 14.048C153.822 12.5333 154.43 11.2 154.43 10.048C154.43 9.728 154.387 9.48267 154.302 9.312C154.216 9.14133 154.024 9.056 153.726 9.056C153.256 9.056 152.787 9.312 152.318 9.824C151.848 10.336 151.347 11.0507 150.814 11.968C150.28 12.8853 149.822 13.728 149.438 14.496C149.075 15.2427 148.776 15.9253 148.542 16.544ZM148.446 16.896C148.318 17.3013 148.2 17.8347 148.094 18.496C147.987 19.136 147.934 19.6693 147.934 20.096C147.934 21.2907 148.094 22.1333 148.414 22.624C148.755 23.1147 149.246 23.36 149.885 23.36C150.376 23.36 150.814 23.3067 151.198 23.2C151.582 23.072 152.03 22.8587 152.542 22.56C153.054 22.2613 153.587 21.824 154.142 21.248C154.718 20.672 155.176 20.1067 155.518 19.552L155.966 19.872C155.07 21.1307 154.014 22.1867 152.798 23.04C151.582 23.8933 150.11 24.32 148.382 24.32C146.803 24.32 145.32 23.8507 143.934 22.912C142.568 21.952 141.886 20.5547 141.886 18.72C141.886 16.16 143.038 13.824 145.342 11.712C147.667 9.57867 150.398 8.512 153.534 8.512C155.006 8.512 156.211 8.85333 157.15 9.536C158.088 10.1973 158.558 10.9653 158.558 11.84C158.558 13.5253 157.576 14.7947 155.614 15.648C153.651 16.48 151.262 16.896 148.446 16.896Z"
                fill="#D4AF37"
              />
            </svg>
          </div>
        </Link>

        <div className="hidden md:flex flex-[1_0_40%]">
          <input
            className="w-full max-w-4xl rounded-2xl  bg-barBG py-2 px-4 outline-none"
            type="search"
            placeholder="Search for products, categories"
          />
        </div>

        <div className="flex [&>*]:mx-2 relative">
          <svg
            className="cursor-pointer hover:fill-success"
            width="40"
            height="40"
            viewBox="0 0 40 40"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M20.8913 33.1093L33.5476 20.4531C36.657 17.3281 37.1101 12.2187 34.1726 8.9531C33.4359 8.13014 32.5391 7.46604 31.5371 7.00135C30.5351 6.53667 29.4488 6.28117 28.3448 6.25046C27.2407 6.21975 26.1419 6.41447 25.1156 6.82274C24.0893 7.23101 23.157 7.84424 22.3757 8.62497L20.0007 11.0156L17.9538 8.9531C14.8288 5.84372 9.71945 5.3906 6.45383 8.3281C5.63088 9.06479 4.96677 9.96155 4.50208 10.9636C4.0374 11.9656 3.7819 13.0518 3.75119 14.1559C3.72048 15.26 3.91521 16.3588 4.32347 17.3851C4.73174 18.4114 5.34497 19.3437 6.1257 20.125L19.1101 33.1093C19.3471 33.3441 19.6671 33.4758 20.0007 33.4758C20.3343 33.4758 20.6543 33.3441 20.8913 33.1093V33.1093Z"
              stroke="#121212"
              strokeWidth="2.5"
              strokeLinecap="round"
              strokeLinejoin="round"
            />
          </svg>

          <Link to="cart">
            <svg
              className="cursor-pointer hover:fill-success"
              width="40"
              height="40"
              viewBox="0 0 40 40"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M28.75 28.75H10.9063L6.54688 4.78125C6.49587 4.49421 6.34614 4.23403 6.12358 4.04571C5.90103 3.85739 5.61965 3.75279 5.32812 3.75H2.5"
                stroke="#121212"
                strokeWidth="2.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M12.5 35C14.2259 35 15.625 33.6009 15.625 31.875C15.625 30.1491 14.2259 28.75 12.5 28.75C10.7741 28.75 9.375 30.1491 9.375 31.875C9.375 33.6009 10.7741 35 12.5 35Z"
                stroke="#121212"
                strokeWidth="2.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M28.75 35C30.4759 35 31.875 33.6009 31.875 31.875C31.875 30.1491 30.4759 28.75 28.75 28.75C27.0241 28.75 25.625 30.1491 25.625 31.875C25.625 33.6009 27.0241 35 28.75 35Z"
                stroke="#121212"
                strokeWidth="2.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
              <path
                d="M9.76562 22.5H29.3906C29.9749 22.5018 30.5412 22.2975 30.9899 21.9232C31.4385 21.5488 31.7409 21.0283 31.8438 20.4531L33.75 10H7.5"
                stroke="#121212"
                strokeWidth="2.5"
                strokeLinecap="round"
                strokeLinejoin="round"
              />
            </svg>
          </Link>
          <img
            className="w-10 h-10 rounded-full cursor-pointer"
            src={currentUser?.photoURL}
            alt="user profile"
          />
          <button className="absolute w-4 right-1/3 rounded-full bg-primaryII border-none outline-none">
            {cart?.total_items && <h1>{cart.total_unique_items}</h1>}
          </button>
        </div>
      </div>
      <div className="font-oswald [&>*]:inline-block text-navbar [&>*]:mx-4 lg:[&>*]:mx-12 py-6 md:max-w-[1240px]  lg:ml-20 whitespace-nowrap overflow-x-scroll ">
        <a className="text-navone font-bold" href="#">
          NEW ARRIVALS
        </a>
        <a href="#">TRENDING NOW</a>
        <a href="#">CLOTHINGS</a>
        <a href="#">FOOTWEARS</a>
        <a href="#">ACCESSORIES</a>
        <a href="#">BACK IN-STOCK</a>
        <a className="text-success" href="#">
          CLEARANCE
        </a>
      </div>
      <div className="border-b-2 border-black mb-6 "></div>

      <Routes>
        <Route
          path="*"
          element={<Products products={products} onAddToCart={onAddToCart} />}
        />
        <Route
          path="/cart"
          element={<Cart cart={cart} OnRemoveCart={removeCart} />}
        />
      </Routes>
    </section>
  );
};
export default Arrivals;
